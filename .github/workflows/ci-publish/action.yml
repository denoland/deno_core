name: Publish workflow
runs:
  using: "composite"
  steps:
    - name: Cargo publish
      env:
        CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}
      run: cargo publish -p serde_v8 && cargo publish -p deno_ops && cargo publish -p deno_core
    - name: Get tag version
      id: get_tag_version
      run: echo TAG_VERSION=${GITHUB_REF/refs\/tags\//} >> "$GITHUB_OUTPUT"
